---
title: 가정에서 데이터센터 GPU 사용하기
published: 0001-01-01
description: ""
tags: []
category: Default
draft: false
---

## 서론 

이 글은 `tcgen05` , `TMEM` 등의 `SM_100` 전용 명령어를 학습 목적으로 사용해보고자 하는 개발자를 위한 것이다

나처럼 "RTX 5000 시리즈도 텐서코어 5세대 하드웨어가 탑재되었으니 `tcgen05` 명령어를 사용할 수 있겠지?" 라는 순진한 믿음을 가지고 RTX 5060 ti를 샀다가 `tcgen05` 명령어를 사용할 수 없다는 사실을 뒤늦게 깨달은 개발자들을 위한 글이다

RTX 5000 시리즈는 `SM_120` 기반 아키텍처이고 이는 데이터센터용 블랙웰인 `SM_100` 기반 GPU와는 전혀 다르며 **가정용 블랙웰은 이름만 블랙웰인 가짜 블랙웰**이라 불러도 무방한데 데이터센터용 블랙웰과 비교하여 아키텍처가 완전히 다르기 때문이다

즉 RTX 5000 시리즈가 있더라도 학습 용도로 `SM_100` 전용 명령어를 사용할 수 없다. 심지어 이전 세대인 호퍼(SM_90)의 명령어인 `wgmma`도 사용할 수 없다. 호퍼(SM_90)도 데이터센터용 GPU인데 컨슈머용 GPU에서는 데이터센터 전용 명령어를 지원하지 않는다.

## 그러면 클라우드 서비스에서 GPU를 렌탈하면 되지 않는가 ?

좋은 소식은, 당신은 클라우드 서비스를 이용하여 B200을 렌트할 수 있다. 오늘날 GPU 임대 서비를 제공하는 클라우드 업체는 10군데가 넘는다

구글 클라우드와 네비우스(NEBIUS AI), `vast.ai`, `Runpod` 는 B200 렌탈 서비스를 제공한다

하지만 실제로 당신이 그것을 사용할수 있냐고 묻는다면 비용 문제로 인해 현실적으로 어려울것이다. 

본인이 찾은 가장 저렴하게 B200을 렌트할 수 있는 서비스는 `vast.ai`인데 여기서는 4개 단위로 B200을 렌트할 수 있고 임대료는 `interruptible 버전` 기준으로 시간당 11.204 달러이다. interruptible 버전에 대한 상세 설명은 [여기](https://vast.ai/article/Rental-Types)를 참조하라

11.204달러는 2025년 12월 30일 기준으로 16,091원이다. 한시간에 만육천원을 주고 사용해야 하는 것이다. 10시간을 쓰면 16만원이고 100시간을 쓰면 160만원이다.

그리고 B100 렌탈 서비스는 2025년 12월 30일 기준으로 존재하지 않는다. 왜인지는 본인도 모르겠다. 모든 GPU 렌탈 서비스 업체들에서 `B200`를 4개 또는 8개 단위로 대여할 수 있을 뿐이다.

그러므로 이런 고비용을 감당할 수 있는 소수의 개발자를 제외하면 가정에서 `SM_100` 전용 명령어로 GPU 커널 최적화를 해보는 것은 어려울 것이다

다만 `H100`의 임대는 상대적으로 비용이 낮으므로 호퍼(SM_90) 전용 명령어, 예를들어 `wgmma`와 비동기 TMA등을 이용하여 커널 최적화를 해보고싶다면 이것은 현실성이 있다

H100은 1개 단위로 렌탈이 가능하며 `vast.ai` 기준으로 최저가는 시간당 0.274달러이다 (Interruptible 인스턴스 기준).

비용을 줄이는 현실적인 방법으로 아래의 시나리오대로 사용할 수 있다

1. 먼저 로컬에서 GPU 커널을 작성하고 `SM_90` 타겟으로 컴파일한다. 내 GPU가 `SM_120` 아키텍처라 하더라도 `SM_90` 타겟으로 크로스 컴파일하는 것은 가능하다. 다만 실행이 되지않을 뿐이다.
1.1. 컴파일할 때 디버깅 모드로 컴파일한다 
2. 이 바이너리 파일을 임의의 서버에 업로드한다
3. H100 인스턴스를 런칭한다
4. 미리 작성해놓은 바이너리 파일을 다운로드한다
5. 바이너리 파일을 실행하면 에러가 발생하거나 정상 실행될 것이다. 뭐가 되었든 로그를 저장한다.
6. 로그를 비롯한 모든 실행정보를 임의의 서버에 업로드한다.
7. GPU 커널의 실행이 종료되었으므로 H100 인스턴스를 끈다
8. 서버에 기록된 로그를 살펴보면서 에러가 발생했다면 에러를 수정하고, 속도가 느리다면 속도 튜닝을 시도해본다

이것이 하나의 실행 사이클이다. 번거롭지만 `H100 인스턴스`의 비용을 감당하기 어렵다면 이 방법 외에는 없을 것이다.

---

## 지울 예정인 문장들

왜 8개 단위로만 임대할수있냐면 클라우드 업체가 제공하는 하드웨어는 `NVIDIA DGX B200`인데 이는 8개의 `B200`으로 구성되어 있기 때문이다. 즉 GPU단위 렌트가 아닌 DGX단위 렌트만 가능하다. 

44.13달러는 2025년 12월 30일 기준으로 63,232원이다. 한시간에 육만원을 주고 사용해야 하는 것이다. 10시간을 쓰면 63만원이고 100시간을 쓰면 630만원이다.

H100은 8개 단위가 아닌 1개 단위로 렌탈이 가능하며 비용은 NEVIUS AI 기준으로 시간당 3.08달러이다. 100시간을 사용하면 약 154달러 (한화로 221,083원)으로서 이것도 저렴한 금액은 아니지만 데이터센터 전용 GPU 명령어로 개발을 할 수 있는 최저 금액이라고 생각하면 좋을 것이다